<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en"><head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/"><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Making HTTP Pipelining Usable on the Open Web</title><style type="text/css" title="Xml2Rfc (sans serif)">
a {
  text-decoration: none;
}
a.smpl {
  color: black;
}
a:hover {
  text-decoration: underline;
}
a:active {
  text-decoration: underline;
}
address {
  margin-top: 1em;
  margin-left: 2em;
  font-style: normal;
}
body {
  color: black;
  font-family: verdana, helvetica, arial, sans-serif;
  font-size: 10pt;
}
cite {
  font-style: normal;
}
dd {
  margin-right: 2em;
}
dl {
  margin-left: 2em;
}

dl.empty dd {
  margin-top: .5em;
}
dl p {
  margin-left: 0em;
}
dt {
  margin-top: .5em;
}
h1 {
  font-size: 14pt;
  line-height: 21pt;
  page-break-after: avoid;
}
h1.np {
  page-break-before: always;
}
h1 a {
  color: #333333;
}
h2 {
  font-size: 12pt;
  line-height: 15pt;
  page-break-after: avoid;
}
h3, h4, h5, h6 {
  font-size: 10pt;
  page-break-after: avoid;
}
h2 a, h3 a, h4 a, h5 a, h6 a {
  color: black;
}
img {
  margin-left: 3em;
}
li {
  margin-left: 2em;
  margin-right: 2em;
}
ol {
  margin-left: 2em;
  margin-right: 2em;
}
ol p {
  margin-left: 0em;
}
p {
  margin-left: 2em;
  margin-right: 2em;
}
pre {
  margin-left: 3em;
  background-color: lightyellow;
  padding: .25em;
}
pre.text2 {
  border-style: dotted;
  border-width: 1px;
  background-color: #f0f0f0;
  width: 69em;
}
pre.inline {
  background-color: white;
  padding: 0em;
}
pre.text {
  border-style: dotted;
  border-width: 1px;
  background-color: #f8f8f8;
  width: 69em;
}
pre.drawing {
  border-style: solid;
  border-width: 1px;
  background-color: #f8f8f8;
  padding: 2em;
}
table {
  margin-left: 2em;
}
table.header {
  width: 95%;
  font-size: 10pt;
  color: white;
}
td.top {
  vertical-align: top;
}
td.topnowrap {
  vertical-align: top;
  white-space: nowrap; 
}
td.header {
  background-color: gray;
  width: 50%;
}
td.header a {
  color: white;
}
td.reference {
  vertical-align: top;
  white-space: nowrap;
  padding-right: 1em;
}
thead {
  display:table-header-group;
}
ul.toc {
  list-style: none;
  margin-left: 1.5em;
  margin-right: 0em;
  padding-left: 0em;
}
li.tocline0 {
  line-height: 150%;
  font-weight: bold;
  font-size: 10pt;
  margin-left: 0em;
  margin-right: 0em;
}
li.tocline1 {
  line-height: normal;
  font-weight: normal;
  font-size: 9pt;
  margin-left: 0em;
  margin-right: 0em;
}
li.tocline2 {
  font-size: 0pt;
}
ul p {
  margin-left: 0em;
}

.comment {
  background-color: yellow;
}
.center {
  text-align: center;
}
.error {
  color: red;
  font-style: italic;
  font-weight: bold;
}
.figure {
  font-weight: bold;
  text-align: center;
  font-size: 9pt;
}
.filename {
  color: #333333;
  font-weight: bold;
  font-size: 12pt;
  line-height: 21pt;
  text-align: center;
}
.fn {
  font-weight: bold;
}
.hidden {
  display: none;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.title {
  color: #990000;
  font-size: 18pt;
  line-height: 18pt;
  font-weight: bold;
  text-align: center;
  margin-top: 36pt;
}
.vcardline {
  display: block;
}
.warning {
  font-size: 14pt;
  background-color: yellow;
}


@media print {
  .noprint {
    display: none;
  }
  
  a {
    color: black;
    text-decoration: none;
  }

  table.header {
    width: 90%;
  }

  td.header {
    width: 50%;
    color: black;
    background-color: white;
    vertical-align: top;
    font-size: 12pt;
  }

  ul.toc a::after {
    content: leader('.') target-counter(attr(href), page);
  }
  
  a.iref {
    content: target-counter(attr(href), page);
  }
  
  .print2col {
    column-count: 2;
    -moz-column-count: 2;
    column-fill: auto;
  }
}

@page {
  @top-left {
       content: "INTERNET DRAFT"; 
  } 
  @top-right {
       content: "August 2010"; 
  } 
  @top-center {
       content: "HTTP Pipelining Enhancements"; 
  } 
  @bottom-left {
       content: "Nottingham"; 
  } 
  @bottom-center {
       content: "Informational"; 
  } 
  @bottom-right {
       content: "[Page " counter(page) "]"; 
  } 
}

@page:first { 
    @top-left {
      content: normal;
    }
    @top-right {
      content: normal;
    }
    @top-center {
      content: normal;
    }
}
</style><link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyright"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 Requirements" href="#rfc.section.2"><link rel="Chapter" title="3 HTTP Pipelining Issues" href="#rfc.section.3"><link rel="Chapter" title="4 Discovering Faulty Proxies" href="#rfc.section.4"><link rel="Chapter" title="5 Identifying Responses" href="#rfc.section.5"><link rel="Chapter" title="6 Signing Content for Integrity" href="#rfc.section.6"><link rel="Chapter" title="7 Hinting Pipelinable Content" href="#rfc.section.7"><link rel="Chapter" title="8 Origin Server Considerations for Pipelining" href="#rfc.section.8"><link rel="Chapter" title="9 User Agent Considerations for Pipelining" href="#rfc.section.9"><link rel="Chapter" title="10 Security Considerations" href="#rfc.section.10"><link rel="Chapter" title="11 IANA Considerations" href="#rfc.section.11"><link rel="Chapter" href="#rfc.section.12" title="12 References"><link rel="Appendix" title="A Acknowledgements" href="#rfc.section.A"><link rel="Appendix" title="B Frequently Asked Questions" href="#rfc.section.B"><meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.478, 2009-10-16 14:30:15, XSLT vendor: SAXON 8.9 from Saxonica http://www.saxonica.com/"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.Creator" content="Nottingham, M."><meta name="DC.Identifier" content="urn:ietf:id:draft-nottingham-http-pipeline-00"><meta name="DC.Date.Issued" scheme="ISO8601" content="2010-08-10"><meta name="DC.Description.Abstract" content="Pipelining was added to HTTP/1.1 as a means of improving the performance of persistent connections in common cases. While it is deployed in some limited circumstances, it is not widely used by clients on the open Internet. This memo suggests some measures designed to make it more possible for clients to reliably and safely use HTTP pipelining in these situations.This memo should be discussed on the ietf-http-wg@w3.org mailing list, although it is not a work item of the HTTPbis WG."><meta name="description" content="Pipelining was added to HTTP/1.1 as a means of improving the performance of persistent connections in common cases. While it is deployed in some limited circumstances, it is not widely used by clients on the open Internet. This memo suggests some measures designed to make it more possible for clients to reliably and safely use HTTP pipelining in these situations.This memo should be discussed on the ietf-http-wg@w3.org mailing list, although it is not a work item of the HTTPbis WG."></head><body><table class="header" border="0" cellpadding="1" cellspacing="1"><tr><td class="header left">Network Working Group</td><td class="header right">M. Nottingham</td></tr><tr><td class="header left">Internet Draft</td><td class="header right">August 10, 2010</td></tr><tr><td class="header left">
        &lt;draft-nottingham-http-pipeline-00&gt;
      </td><td class="header right"></td></tr><tr><td class="header left">Intended status: Informational</td><td class="header right"></td></tr><tr><td class="header left">Expires: February 11, 2011</td><td class="header right"></td></tr></table><p class="title">Making HTTP Pipelining Usable on the Open Web<br><span class="filename">draft-nottingham-http-pipeline-00</span></p><h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1><p>Pipelining was added to HTTP/1.1 as a means of improving the performance of persistent connections in common cases. While it is deployed in some limited circumstances, it is not widely used by clients on the open Internet. This memo suggests some measures designed to make it more possible for clients to reliably and safely use HTTP pipelining in these situations.</p><p>This memo should be discussed on the ietf-http-wg@w3.org mailing list, although it is not a work item of the HTTPbis WG.</p><h1><a id="rfc.status" href="#rfc.status">Status of this Memo</a></h1><p>This Internet-Draft is submitted to IETF in full conformance with the provisions of BCP 78 and BCP 79.</p><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF), its areas, and its working groups. Note that other groups may also distribute working documents as Internet-Drafts.</p><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as &#8220;work in progress&#8221;.</p><p>The list of current Internet-Drafts can be accessed at &lt;<a href="http://www.ietf.org/ietf/1id-abstracts.txt">http://www.ietf.org/ietf/1id-abstracts.txt</a>&gt;.</p><p>The list of Internet-Draft Shadow Directories can be accessed at &lt;<a href="http://www.ietf.org/shadow.html">http://www.ietf.org/shadow.html</a>&gt;.</p><p>This Internet-Draft will expire in February 11, 2011.</p><h1><a id="rfc.copyrightnotice" href="#rfc.copyrightnotice">Copyright Notice</a></h1><p>Copyright © 2010 IETF Trust and the persons identified as the document authors. All rights reserved.</p><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the BSD License.</p><hr class="noprint"><h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1><ul class="toc"><li class="tocline0">1.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.1">Introduction</a></li><li class="tocline0">2.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.2">Requirements</a></li><li class="tocline0">3.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.3">HTTP Pipelining Issues</a></li><li class="tocline0">4.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.4">Discovering Faulty Proxies</a></li><li class="tocline0">5.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.5">Identifying Responses</a></li><li class="tocline0">6.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.6">Signing Content for Integrity</a></li><li class="tocline0">7.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.7">Hinting Pipelinable Content</a></li><li class="tocline0">8.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8">Origin Server Considerations for Pipelining</a></li><li class="tocline0">9.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.9">User Agent Considerations for Pipelining</a></li><li class="tocline0">10.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.10">Security Considerations</a></li><li class="tocline0">11.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.11">IANA Considerations</a></li><li class="tocline0">12.&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul class="toc"><li class="tocline1">12.1&nbsp;&nbsp;&nbsp;<a href="#rfc.references.1">Normative References</a></li><li class="tocline1">12.2&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Informative References</a></li></ul></li><li class="tocline0"><a href="#rfc.authors">Author's Address</a></li><li class="tocline0">A.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A">Acknowledgements</a></li><li class="tocline0">B.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.B">Frequently Asked Questions</a></li></ul><h1 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;Introduction</h1><p id="rfc.section.1.p.1">HTTP/1.1 <a href="#RFC2616"><cite title="Hypertext Transfer Protocol -- HTTP/1.1">[RFC2616]</cite></a> added pipelining -- that is, the ability to have more than one outstanding request on a connection at a particular time -- to improve performance when many requests need to be made (e.g., when an HTML page references several images).</p><p id="rfc.section.1.p.2">Although not usable in all circumstances (e.g., POST, PUT and other non-idempotent requests cannot be pipelined), for the common case of Web browsing, pipelining seems at first like a broadly useful improvement -- especially since the number of TCP connections browsers and servers can use for a given interaction is limited, and especially where there is noticeable latency present.</p><p id="rfc.section.1.p.3">Indeed, in constrained applications of HTTP such as Subversion, pipelining has been shown to improve end-user perceived latency considerably.</p><p id="rfc.section.1.p.4">However, pipelining is not broadly used on the Web today; while most (but not all) servers and intermediaries support pipelining (to varying degrees), only one major Web browser uses it in its default configuration, and that implementation is reported to use a number of proprietary heuristics to determine when it is safe to pipeline.</p><p id="rfc.section.1.p.5">This memo characterises issues currently encountered in the use of HTTP pipelining, and suggests the use of mechanisms that, when used in concert, are designed to make its use more reliable and safe for browsers. It does not propose large protocol changes (e.g., out-of-order messages), but rather incremental improvements that can be deployed within the confines of existing infrastructure.</p><h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;Requirements</h1><p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>.</p><h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;HTTP Pipelining Issues</h1><p id="rfc.section.3.p.1">Anecdotal evidence suggests there are a number of reasons why clients don't use HTTP pipelining by default. Briefly, they are: </p><ol><li>Server implementations may stall pipelined requests, or close their connection. This is one of the most commonly cited problems.</li><li>Server implementations may pipeline responses in the wrong order. Some implementations mix up the order of pipelined responses; e.g., when they hit an error state but don't "fill" the response pipeline with a corresponding representation.</li><li>A few server implementations may corrupt pipelined responses. It's been said that a very small number of implementations actually interleave pipelined responses so that part of response A appears in response B, which is both a security and interoperability problem.</li><li>Clients don't have enough information about what is useful to pipeline. A given response may take an inordinate amount of time to generate, and/or be large enough to block subsequent responses. Clients who pipeline may face worse performance if they stack requests behind such an expensive request.</li></ol><p id="rfc.section.3.p.2">Note that here, "servers" can also include proxies and other intermediaries.</p><p id="rfc.section.3.p.3">The remainder of this memo proposes mechanisms that, together, can be used to mitigate these issues.</p><h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;Discovering Faulty Proxies</h1><p id="rfc.section.4.p.1">Issues specific to proxies are limited to the network infrastructure currently used by the client, and it is reasonable to assume that testing the infrastructure at the beginning of a session will indicate how safe it is to pipeline while that infrastructure is in use.</p><p id="rfc.section.4.p.2">Such issues can be detected by sending pipelined requests to a known server, and examining the responses for errors.</p><p id="rfc.section.4.p.3">For example, if the ExampleBrowser implementation wishes to probe for faulty proxies, it can send a series of requests to "http://browser.example.com/pipeline-test/" and subresources. If the bodies of the resulting responses deviate from those it expects in any way, it is reasonable to assume that a faulty proxy is present, and pipelining SHOULD NOT be used through it.</p><p id="rfc.section.4.p.4">Typically, user agents will do this upon startup and changes in the network, although they might periodically test to assure that a new proxy hasn't been interposed.</p><p id="rfc.section.4.p.5">Note that proxies aren't always configured explicitly.</p><h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;Identifying Responses</h1><p id="rfc.section.5.p.1">HTTP relies on the context of the connection to associate a given request with its intended response. In HTTP/1.0, this was a reasonable assumption, since only one request could be outstanding at a given time, and each request had exactly one response.</p><p id="rfc.section.5.p.2">HTTP/1.1 made associating requests and responses in a given connection more complex (and therefore fault-prone). Not only does pipelining mean that multiple requests can be outstanding, but also the 1xx series of response status codes introduce the possibility of multiple response messages (syntactically) being associated with a single request.</p><p id="rfc.section.5.p.3">To improve the client's ability to correlate responses with their requests and identify responses that are out of order (as well as serve other potential use cases), this memo introduces the "Assoc-Req" response header field.</p><div id="rfc.figure.u.1"></div><pre>
  Assoc-Req   = "Assoc-Req" ":" OWS Assoc-Req-v
  Assoc-Req-v = Method SP absolute-URI
</pre><p id="rfc.section.5.p.5">The field-value of the Assoc-Req header field is the method and effective request URI of the request associated with the response that it appears in. The URI used MUST be generated using the algorithm for finding the Effective Request URI in <a href="#I-D.ietf-httpbis-p1-messaging"><cite title="HTTP/1.1, part 1: URIs, Connections, and Message Parsing">[I-D.ietf-httpbis-p1-messaging]</cite></a>. The header field MUST NOT be generated by proxies.</p><p id="rfc.section.5.p.6">For example, given the following request over port 80:</p><div id="rfc.figure.u.2"></div><pre>
  GET /foo?it HTTP/1.1
  Host: www.example.com
</pre><p id="rfc.section.5.p.8">the appropriate Assoc-Req header field would be:</p><div id="rfc.figure.u.3"></div><pre>
  Assoc-Req: GET http://www.example.com/foo?it
</pre><p id="rfc.section.5.p.10">Note that the Assoc-Req header field is not a perfectly reliable identifier for the request associated with a response; for example, it does not incorporate the selecting headers for content negotiation <a href="#I-D.ietf-httpbis-p6-cache"><cite title="HTTP/1.1, part 6: Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>, nor does it differentiate request bodies, when present. However, for the purposes of making pipelining more reliable, it is sufficient.</p><p id="rfc.section.5.p.11">Clients who wish to use the Assoc-Req response header field to aid in identifying problems in pipelining can compare its values to those of the request that they believe it to be associated with (based upon HTTP's message parsing rules, defined in <a href="#I-D.ietf-httpbis-p1-messaging"><cite title="HTTP/1.1, part 1: URIs, Connections, and Message Parsing">[I-D.ietf-httpbis-p1-messaging]</cite></a>). If either the method or the URI differ, it indicates that there may be a pipelining-related issue.</p><h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;Signing Content for Integrity</h1><p id="rfc.section.6.p.1">Another means of protecting against server issues (whether proxy or origin server) is to sign the response content for integrity, so that any corruption becomes apparent.</p><p id="rfc.section.6.p.2">One existing way to do this is to use the Content-MD5 header field <a href="#I-D.ietf-httpbis-p3-payload"><cite title="HTTP/1.1, part 3: Message Payload and Content Negotiation">[I-D.ietf-httpbis-p3-payload]</cite></a>.</p><p id="rfc.section.6.p.3">Clients who wish to use the Content-MD5 response header field to aid in identifying corrupted content due to pipelining issues can compare the hash to a calculated hash of the content.</p><p id="rfc.section.6.p.4">In some circumstances, it may be impractical for the server to buffer the response content in order to calculate a hash before sending it. In these cases, the Content-MD5 response header can be send in an HTTP trailer, provided that the connection is HTTP/1.1 from end to end, and the client is able to process trailers.</p><p id="rfc.section.6.p.5">Additional means of verifying HTTP response integrity may become available in time.</p><h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;Hinting Pipelinable Content</h1><p id="rfc.section.7.p.1">Finally, to assist clients in determining what requests are suitable for pipelining, we define extensions to allow hinting by origin servers.</p><p id="rfc.section.7.p.2">Each of these hints indicates URLs that, when dereferenced, will likely not incur significant latency on the server in generating the response, nor significant latency on the network in transferring the response.</p><p id="rfc.section.7.p.3">What is "significant" is determined by the server. Clients will use these hints to determine what request(s) it is safe to pipeline something else after.</p><p id="rfc.section.7.p.4">For example, if "http://example.com/a" is hinted, a client can be more confident pipelining another request (e.g., to "http://example.com/b") on the same request afterwards.</p><p id="rfc.section.7.p.5">To allow flexibility and ease of administration, different kinds of hints are defined: </p><ul><li>The "quick" link relation type [TBD: ref] can appear on individual HTML elements such as "img", "script" and "link" to indicate that the link they contain has low overhead. Additionally, it can be used in the HTTP link header to indicate links within the response in a format-neutral way.</li><li>A document can indicate that all links from the indicated elements have low overhead by using the HTML META "quick" element, with the content indicating the element names that are "quick". For example, "&lt;META name='quick' content='img script link'/&gt;".</li><li>[DISCUSS: is it worthwhile to define a /.well-known lookup mechanism for quick links?]</li></ul><h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;Origin Server Considerations for Pipelining</h1><p id="rfc.section.8.p.1">To maximise the potential for request pipelining from clients that support this specification, origin servers: </p><ul><li>SHOULD send the Assoc-Req response header field in all potentially pipelinable responses (keeping in mind that downstream caches might be serving responses in the future).</li><li>SHOULD send the Content-MD5 response header (or trailer) field in potentially pipelinable responses.</li><li>SHOULD hint potentially pipelinable requests as outlined above.</li></ul><h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a>&nbsp;User Agent Considerations for Pipelining</h1><p id="rfc.section.9.p.1">To take advantage of the server-side mechanisms defined in this specification, user agents: </p><ul><li>SHOULD ascertain whether any proxies present (either configured or interposed by interception) support pipelining by following the protocol described above. If they do not, pipelining SHOULD NOT be used.</li><li>SHOULD check the Assoc-Req response header field-value, when present, on all pipelined responses.</li><li>SHOULD check the Content-MD5 response header (or trailer) field-value, when present, on all pipelined responses.</li><li>MAY use content hints for pipelining to assist in determining whether to pipeline a given request.</li></ul><p id="rfc.section.9.p.2">Upon encountering an indication of pipelining problems with a particular response (e.g., an incorrect Assoc-Req field-value, an incorrect Content-MD5 field-value), user agents SHOULD discard the response in question, all subsequent responses on the same connection, close the connection. Unsatisfied requests can be resubmitted, without pipelining, and the implementation can choose not to use pipelining to the same server in the future.</p><h1 id="rfc.section.10"><a href="#rfc.section.10">10.</a>&nbsp;Security Considerations</h1><p id="rfc.section.10.p.1">TBD</p><h1 id="rfc.section.11"><a href="#rfc.section.11">11.</a>&nbsp;IANA Considerations</h1><p id="rfc.section.11.p.1">TBD</p><h1 id="rfc.references"><a id="rfc.section.12" href="#rfc.section.12">12.</a> References</h1><h2 id="rfc.references.1"><a href="#rfc.section.12.1" id="rfc.section.12.1">12.1</a> Normative References</h2><table><tr><td class="reference"><b id="I-D.ietf-httpbis-p1-messaging">[I-D.ietf-httpbis-p1-messaging]</b></td><td class="top">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-11">HTTP/1.1, part 1: URIs, Connections, and Message Parsing</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p1-messaging-11 (work in progress), August&nbsp;2010.</td></tr><tr><td class="reference"><b id="I-D.ietf-httpbis-p3-payload">[I-D.ietf-httpbis-p3-payload]</b></td><td class="top">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p3-payload-11">HTTP/1.1, part 3: Message Payload and Content Negotiation</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p3-payload-11 (work in progress), August&nbsp;2010.</td></tr><tr><td class="reference"><b id="RFC2119">[RFC2119]</b></td><td class="top"><a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, &#8220;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>&#8221;, BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr></table><h2 id="rfc.references.2"><a href="#rfc.section.12.2" id="rfc.section.12.2">12.2</a> Informative References</h2><table><tr><td class="reference"><b id="I-D.ietf-httpbis-p6-cache">[I-D.ietf-httpbis-p6-cache]</b></td><td class="top">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., Lafon, Y., Nottingham, M., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p6-cache-11">HTTP/1.1, part 6: Caching</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p6-cache-11 (work in progress), August&nbsp;2010.</td></tr><tr><td class="reference"><b id="RFC2616">[RFC2616]</b></td><td class="top"><a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a>, and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, &#8220;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>&#8221;, RFC&nbsp;2616, June&nbsp;1999.</td></tr></table><div class="avoidbreak"><h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1><address class="vcard"><span class="vcardline"><span class="fn">Mark Nottingham</span><span class="n hidden"><span class="family-name">Nottingham</span><span class="given-name">Mark</span></span></span><span class="vcardline">EMail: <a href="mailto:mnot@mnot.net"><span class="email">mnot@mnot.net</span></a></span><span class="vcardline">URI: <a href="http://www.mnot.net/" class="url">http://www.mnot.net/</a></span></address></div><h1 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a>&nbsp;Acknowledgements</h1><p id="rfc.section.A.p.1">Thanks to Julian Reschke for help in defining the Assoc-Req field-value. The author takes all responsibility for errors and omissions.</p><h1 id="rfc.section.B"><a href="#rfc.section.B">B.</a>&nbsp;Frequently Asked Questions</h1><p id="rfc.section.B.p.1">Isn't full multiplexing better?</p><p id="rfc.section.B.p.2">While "full" multiplexing is theoretically better, pipelining -- once usable -- is adequate for almost all common Web browsing cases. Since the browser needs to download HTML first, it has an opportunity to receive hints about subsequent requests and pipeline them appropriately. Likewise, by far the most common case for multiplexing on the Web is when a large number of images and other page assets need to be fetched with GET; a perfect use of pipelining, provided that the client has enough information to avoid head-of-line blocking.</p><p id="rfc.section.B.p.3">Why not have the client generate a unique request identifier?</p><p id="rfc.section.B.p.4">While in some ways this would be easier than the approach that the Assoc-Req header takes, it would be more difficult to deploy, because existing caching proxies wouldn't be able to serve the correct identifier when using a cached response.</p></body></html>